<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.6.0_27) on Fri Mar 02 14:51:56 CET 2018 -->
<title>Ha (CONF API Version 6.6)</title>
<meta name="date" content="2018-03-02">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Ha (CONF API Version 6.6)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Ha.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../com/tailf/ha/HaException.html" title="class in com.tailf.ha"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/tailf/ha/Ha.html" target="_top">Frames</a></li>
<li><a href="Ha.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.tailf.ha</div>
<h2 title="Class Ha" class="title">Class Ha</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></li>
<li>
<ul class="inheritance">
<li>com.tailf.ha.Ha</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<hr>
<br>
<pre>public class <span class="strong">Ha</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">Main class for the HA cluster management. The HA functionality makes it
 possible to replicate the configuration data on several nodes in a cluster.
 The details on usage of the HA api is described in the UserGuide.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../com/tailf/ha/Ha.html#Ha(java.net.Socket, java.lang.String)">Ha</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html?is-external=true" title="class or interface in java.net">Socket</a>&nbsp;socket,
  <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;token)</code>
<div class="block">Constructor for management of a HA Cluster node This constructor
 implicitly connect a HA socket which can be used to control a ConfD HA
 node.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/tailf/ha/Ha.html#beMaster(com.tailf.conf.ConfValue)">beMaster</a></strong>(<a href="../../../com/tailf/conf/ConfValue.html" title="class in com.tailf.conf">ConfValue</a>&nbsp;myNodeId)</code>
<div class="block">Instruct a HA node to be master and also give the node a name.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/tailf/ha/Ha.html#beNone()">beNone</a></strong>()</code>
<div class="block">Instruct a node to resume the initial state, i.e.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/tailf/ha/Ha.html#beRelay()">beRelay</a></strong>()</code>
<div class="block">Instruct a slave node to be a relay for other slaves.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/tailf/ha/Ha.html#beSlave(com.tailf.conf.ConfValue, com.tailf.conf.ConfHaNode, boolean)">beSlave</a></strong>(<a href="../../../com/tailf/conf/ConfValue.html" title="class in com.tailf.conf">ConfValue</a>&nbsp;myNodeId,
       <a href="../../../com/tailf/conf/ConfHaNode.html" title="class in com.tailf.conf">ConfHaNode</a>&nbsp;master,
       boolean&nbsp;waitForReply)</code>
<div class="block">Instruct a HA node to be slave with a named master.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/tailf/ha/Ha.html#slaveDead(com.tailf.conf.ConfValue)">slaveDead</a></strong>(<a href="../../../com/tailf/conf/ConfValue.html" title="class in com.tailf.conf">ConfValue</a>&nbsp;nodeId)</code>
<div class="block">This function must be used by the application to inform HA subsystem that
 another node which is possibly connected to the server is dead.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/tailf/ha/HaStatus.html" title="class in com.tailf.ha">HaStatus</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/tailf/ha/Ha.html#status()">status</a></strong>()</code>
<div class="block">Query a HA node for its status.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Ha(java.net.Socket, java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Ha</h4>
<pre>public&nbsp;Ha(<a href="http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html?is-external=true" title="class or interface in java.net">Socket</a>&nbsp;socket,
  <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;token)
   throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
          <a href="../../../com/tailf/ha/HaException.html" title="class in com.tailf.ha">HaException</a></pre>
<div class="block">Constructor for management of a HA Cluster node This constructor
 implicitly connect a HA socket which can be used to control a ConfD HA
 node. The token is a secret string that must be shared by all
 participants in the cluster. There can only be one HA socket towards the
 server, which implies only on HA instance. If a new HA instance is
 created the previous connection is closed and the cluster node reset with
 the new token value.

 Since the ConfD/NCS daemon expects initialization within
 5 seconds after a new socket is established this constructor should be
 called directly for a new socket. For instance:
 <code>
 // int port = Conf.PORT for ConfD or Conf.NCS_PORT for NCS
 Ha ha = new Ha(new Socket("localhost", port), "xyz");
 </code>

 <p>If encrypted communication towards ConfD/NCS is desired,
 an environment variable "CONFD_IPC_ACCESS_FILE" or "NCS_IPC_ACCESS_FILE"
 need to be set.
 This variable is expected to point to a file containing a secret salt.
  example:
     export CONFD_IPC_ACCESS_FILE=./secret_file.txt
 An alternative to the environment variable is to set an java system
 property with the same name pointing to the file.



 Note, if this constructor fails the socket must be closed and a new
 socket created before the call is re-attempted.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>socket</code> - Ha control socket</dd><dd><code>token</code> - cluster common shared secret</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="../../../com/tailf/ha/HaException.html" title="class in com.tailf.ha">HaException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="beMaster(com.tailf.conf.ConfValue)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>beMaster</h4>
<pre>public&nbsp;void&nbsp;beMaster(<a href="../../../com/tailf/conf/ConfValue.html" title="class in com.tailf.conf">ConfValue</a>&nbsp;myNodeId)
              throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                     <a href="../../../com/tailf/ha/HaException.html" title="class in com.tailf.ha">HaException</a></pre>
<div class="block">Instruct a HA node to be master and also give the node a name.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>myNodeId</code> - ConfValue naming the ha node</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="../../../com/tailf/ha/HaException.html" title="class in com.tailf.ha">HaException</a></code></dd></dl>
</li>
</ul>
<a name="beNone()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>beNone</h4>
<pre>public&nbsp;void&nbsp;beNone()
            throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                   <a href="../../../com/tailf/ha/HaException.html" title="class in com.tailf.ha">HaException</a></pre>
<div class="block">Instruct a node to resume the initial state, i.e. neither master nor
 slave.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="../../../com/tailf/ha/HaException.html" title="class in com.tailf.ha">HaException</a></code></dd></dl>
</li>
</ul>
<a name="beRelay()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>beRelay</h4>
<pre>public&nbsp;void&nbsp;beRelay()
             throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                    <a href="../../../com/tailf/ha/HaException.html" title="class in com.tailf.ha">HaException</a></pre>
<div class="block">Instruct a slave node to be a relay for other slaves.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="../../../com/tailf/ha/HaException.html" title="class in com.tailf.ha">HaException</a></code></dd></dl>
</li>
</ul>
<a name="beSlave(com.tailf.conf.ConfValue, com.tailf.conf.ConfHaNode, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>beSlave</h4>
<pre>public&nbsp;void&nbsp;beSlave(<a href="../../../com/tailf/conf/ConfValue.html" title="class in com.tailf.conf">ConfValue</a>&nbsp;myNodeId,
           <a href="../../../com/tailf/conf/ConfHaNode.html" title="class in com.tailf.conf">ConfHaNode</a>&nbsp;master,
           boolean&nbsp;waitForReply)
             throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                    <a href="../../../com/tailf/ha/HaException.html" title="class in com.tailf.ha">HaException</a></pre>
<div class="block">Instruct a HA node to be slave with a named master. The waitreply is a
 boolean. If true, the function is synchronous and it will hang until the
 node has initialized its CDB database. This may mean that the CDB
 database is copied in its entirety from the master. If false, we do not
 wait for the reply, but it is possible to use a notifications socket and
 get notified asynchronously via a HA_INFO_BESLAVE_RESULT notification.
 In both cases, it is also possible to use a notifications socket and get
 notified asynchronously when CDB at the slave is initialized.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>myNodeId</code> - ConfValue naming the ha node</dd><dd><code>master</code> - Master ConfHaNode</dd><dd><code>waitForReply</code> - boolean, set true if call should block until response</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="../../../com/tailf/ha/HaException.html" title="class in com.tailf.ha">HaException</a></code></dd></dl>
</li>
</ul>
<a name="slaveDead(com.tailf.conf.ConfValue)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>slaveDead</h4>
<pre>public&nbsp;void&nbsp;slaveDead(<a href="../../../com/tailf/conf/ConfValue.html" title="class in com.tailf.conf">ConfValue</a>&nbsp;nodeId)
               throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                      <a href="../../../com/tailf/ha/HaException.html" title="class in com.tailf.ha">HaException</a></pre>
<div class="block">This function must be used by the application to inform HA subsystem that
 another node which is possibly connected to the server is dead.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>nodeId</code> - ConfValue naming the cluster node</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="../../../com/tailf/ha/HaException.html" title="class in com.tailf.ha">HaException</a></code></dd></dl>
</li>
</ul>
<a name="status()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>status</h4>
<pre>public&nbsp;<a href="../../../com/tailf/ha/HaStatus.html" title="class in com.tailf.ha">HaStatus</a>&nbsp;status()
                throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                       <a href="../../../com/tailf/ha/HaException.html" title="class in com.tailf.ha">HaException</a></pre>
<div class="block">Query a HA node for its status. If successful, the function returns a
 HaStatus object.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>HaStatus enum indicating status of the node</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="../../../com/tailf/ha/HaException.html" title="class in com.tailf.ha">HaException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Ha.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../com/tailf/ha/HaException.html" title="class in com.tailf.ha"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/tailf/ha/Ha.html" target="_top">Frames</a></li>
<li><a href="Ha.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
